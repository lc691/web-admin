{% extends "base.html" %}
{% block content %}
<h1 class="h3 mb-3 text-gray-800">Channel Management</h1>

<div class="mb-3">
  <a href="/channel/create" class="btn btn-success">
    <i class="fas fa-plus"></i> Tambah Channel
  </a>
</div>

<div class="card shadow mb-4">
  <div class="card-body table-responsive">

    <table class="table table-bordered table-hover" id="channelsTable" width="100%" cellspacing="0">
      <thead class="thead-light">
        <tr>
          <th>ID</th>
          <th>Nama Variabel</th>
          <th>Alias</th>
          <th>Nilai</th>
          <th>Keterangan</th>
          <th>Status</th>
          <th width="150">Aksi</th>
        </tr>
      </thead>

      <tbody>
        {% for c in channels %}
        <tr>
          <td>{{ c.id }}</td>
          <td>{{ c.nama_variabel }}</td>
          <td>{{ c.alias or '-' }}</td>
          <td>{{ c.nilai }}</td>
          <td>{{ c.keterangan or '-' }}</td>

          <td>
            {% if c.is_active %}
            <span class="badge badge-success">Aktif</span>
            {% else %}
            <span class="badge badge-secondary">Nonaktif</span>
            {% endif %}
          </td>

          <td>

            {% if not c.is_active %}
            <form action="/channel/set_active" method="post" style="display:inline;">
              <input type="hidden" name="channel_id" value="{{ c.id }}">
              <button type="submit" class="btn btn-sm btn-primary" title="Set Aktif">
                <i class="fas fa-check"></i>
              </button>
            </form>
            {% endif %}

            <a href="/channel/edit/{{ c.id }}" class="btn btn-sm btn-warning" title="Edit">
              <i class="fas fa-pencil-alt"></i>
            </a>

            <form action="/channel/delete/{{ c.id }}" method="post" style="display:inline;"
              onsubmit="return confirm('Yakin ingin menghapus channel ini?');">
              <button type="submit" class="btn btn-sm btn-danger" title="Delete">
                <i class="fas fa-trash"></i>
              </button>
            </form>

          </td>
        </tr>
        {% endfor %}
      </tbody>

    </table>

  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  $(document).ready(function () {
    $('#channelsTable').DataTable({
      "language": {
        "search": "Cari:",
        "lengthMenu": "Tampilkan _MENU_ entri",
        "info": "Menampilkan _START_ sampai _END_ dari _TOTAL_ entri",
        "paginate": {
          "first": "Awal",
          "last": "Akhir",
          "next": "Berikutnya",
          "previous": "Sebelumnya"
        },
        "zeroRecords": "Tidak ada data ditemukan",
      }
    });
  });
</script>
{% endblock %}